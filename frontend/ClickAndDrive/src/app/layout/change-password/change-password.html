<div class="page-wrapper">
    <button class="close-btn" (click)="onClose()">Ã—</button>
    
    <div class="title-container">
      <h2>Change Password</h2>
      <p>Enter your current password and choose a new one</p>
    </div>

    <div class="form-container">
      <form (ngSubmit)="onSubmit()" #passwordForm="ngForm">
        
        <!-- Current Password -->
        <div class="form-row">
          <label for="currentPassword">Current Password *</label>
          <input
            type="password"
            id="currentPassword"
            name="currentPassword"
            [(ngModel)]="currentPassword"
            placeholder="Enter your current password"
            [class.invalid]="isFieldInvalid('currentPassword')"
            (blur)="validateField('currentPassword', currentPassword)"
            required
          />
          <span class="error-text" *ngIf="fieldErrors['currentPassword']">
            {{ fieldErrors['currentPassword'] }}
          </span>
        </div>

        <!-- New Password -->
        <div class="form-row">
          <label for="newPassword">New Password *</label>
          <input
            type="password"
            id="newPassword"
            name="newPassword"
            [(ngModel)]="newPassword"
            placeholder="Enter your new password"
            [class.invalid]="isFieldInvalid('newPassword')"
            (blur)="validateField('newPassword', newPassword)"
            required
          />
          <span class="error-text" *ngIf="fieldErrors['newPassword']">
            {{ fieldErrors['newPassword'] }}
          </span>
          <small class="hint">At least 8 characters, one uppercase letter and one number</small>
        </div>

        <!-- Confirm New Password -->
        <div class="form-row">
          <label for="confirmPassword">Confirm New Password *</label>
          <input
            type="password"
            id="confirmPassword"
            name="confirmPassword"
            [(ngModel)]="confirmPassword"
            placeholder="Confirm your new password"
            [class.invalid]="isFieldInvalid('confirmPassword')"
            (blur)="validateField('confirmPassword', confirmPassword)"
            required
          />
          <span class="error-text" *ngIf="fieldErrors['confirmPassword']">
            {{ fieldErrors['confirmPassword'] }}
          </span>
        </div>

        <!-- Buttons -->
        <div class="buttons-container">
          <button 
            type="button" 
            class="cancel-btn"
            (click)="onClose()"
          >
            Cancel
          </button>
          <button 
            type="submit" 
            class="submit-btn"
            [disabled]="isLoading"
          >
            <span *ngIf="!isLoading">Change Password</span>
            <span *ngIf="isLoading">Processing...</span>
          </button>
        </div>
      </form>
    </div>
</div>